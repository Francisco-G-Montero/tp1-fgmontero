<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Montero Francisco TP1</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="main.js"></script>

    <script>
        // The client ID is obtained from the Google API Console
// at https://console.developers.google.com/.
// If you run this code from a server other than http://localhost,
// you need to register your own client ID.
var OAUTH2_CLIENT_ID = '__YOUR_CLIENT_ID__';
var OAUTH2_SCOPES = [
  'https://www.googleapis.com/auth/youtube'
];

// Upon loading, the Google APIs JS client automatically invokes this callback.
googleApiClientReady = function() {
  gapi.auth.init(function() {
    window.setTimeout(checkAuth, 1);
  });
}

// Attempt the immediate OAuth 2.0 client flow as soon as the page loads.
// If the currently logged-in Google Account has previously authorized
// the client specified as the OAUTH2_CLIENT_ID, then the authorization
// succeeds with no user intervention. Otherwise, it fails and the
// user interface that prompts for authorization needs to display.
function checkAuth() {
  gapi.auth.authorize({
    client_id: OAUTH2_CLIENT_ID,
    scope: OAUTH2_SCOPES,
    immediate: true
  }, handleAuthResult);
}

// Handle the result of a gapi.auth.authorize() call.
function handleAuthResult(authResult) {
  if (authResult && !authResult.error) {
    // Authorization was successful. Hide authorization prompts and show
    // content that should be visible after authorization succeeds.
    $('.pre-auth').hide();
    $('.post-auth').show();
    loadAPIClientInterfaces();
  } else {
    // Make the #login-link clickable. Attempt a non-immediate OAuth 2.0
    // client flow. The current function is called when that flow completes.
    $('#login-link').click(function() {
      gapi.auth.authorize({
        client_id: OAUTH2_CLIENT_ID,
        scope: OAUTH2_SCOPES,
        immediate: false
        }, handleAuthResult);
    });
  }
}

// Load the client interfaces for the YouTube Analytics and Data APIs, which
// are required to use the Google APIs JS client. More info is available at
// https://developers.google.com/api-client-library/javascript/dev/dev_jscript#loading-the-client-library-and-the-api
function loadAPIClientInterfaces() {
  gapi.client.load('youtube', 'v3', function() {
    handleAPILoaded();
  });
}



        /**
         * Sample JavaScript code for youtube.subscriptions.list
         * See instructions for running APIs Explorer code samples locally:
         * https://developers.google.com/explorer-help/guides/code_samples#javascript
         */
      
        function authenticate() {
          return gapi.auth2.getAuthInstance()
              .signIn({scope: "https://www.googleapis.com/auth/youtube"})
              .then(function() { console.log("Sign-in successful"); },
                    function(err) { console.error("Error signing in", err); });
        }
        function loadClient() {
          gapi.client.setApiKey("AIzaSyCpnQsX98TEFc48-anVmCGuMSln-TlmyFM");
          return gapi.client.load("https://content.googleapis.com/discovery/v1/apis/youtube/v3/rest")
              .then(function() { console.log("GAPI client loaded for API"); },
                    function(err) { console.error("Error loading GAPI client for API", err); });
        }
        // Make sure the client is loaded and sign-in is complete before calling this method.
        function execute() {
          return gapi.client.youtube.subscriptions.list({
            "part": "snippet",
            "maxResults": 5,
            "mine": true
          })
              .then(function(response) {
                      // Handle the results here (response.result has the parsed body).
                      console.log("Response", response);
                    },
                    function(err) { console.error("Execute error", err); });
        }
        gapi.load("client:auth2", function() {
          gapi.auth2.init({client_id: "1018739266897-h51ctjpa24js6262ioer41tle2t4hea0.apps.googleusercontent.com"});
        });
      </script>


</head>
<body>

    <header>
        <img id="logo" src="img/logo.png" alt="logo">
        <ul class="headerItem">
            <li>TP Nro1 <span id="titulo" >Francisco G.</span> Montero</li>
        </ul>
    </header>
    <div id="contenido">
        <div id="lateral">
            <ul>
                <li id="apilinkLi">API links</li>
                <li><a href="">Link API 1</a></li>
                <li><a href="">Link API 2</a></li>
            </ul>
          
        </div>
        <div id="cuerpo">
            <p id="tituloFrase">Frase aleatoria:</p>
            <p id="frase" class=""></p>
            <br><br>
            <button id="asd" onclick="authenticate().then(loadClient)" style="color: black;">authorize and load</button>
            <button onclick="execute()" style="color: black;">execute</button>
            <video controls>
                <source src="video/PresentacionTygweb.mp4" type="">
                Tu navegador no soporta los tag de video.
            </video>
        </div>
    </div>
    
  
    
    <footer>
        Tecnología y Gestión Web 2020
    </footer>
</body>
</html>